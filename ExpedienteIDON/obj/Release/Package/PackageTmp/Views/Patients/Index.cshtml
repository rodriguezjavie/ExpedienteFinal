@model IEnumerable<ExpedienteIDON.ViewModels.PatientRecordProfile>
@{
    ViewBag.Title = "Index";
    Layout = ViewBag.Layout;
}
<div class="page-content-wrapper">
    <div class="page-content">
        <div class="page-bar">
            <div class="page-title-breadcrumb">
                <div class=" pull-left">
                    <div class="page-title">Lista de Pacientes</div>
                </div>
                <ol class="breadcrumb page-breadcrumb pull-right">
                    <li>
                        <i class="fa fa-home"></i>&nbsp;<a class="parent-item" href="@Url.Action("Index","Home")">Inicio</a>&nbsp;<i class="fa fa-angle-right"></i>
                    </li>
                    <li class="active">Lista de Pacientes</li>
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="tabbable-line">
                    <div class="tab-content">
                        <div class="tab-pane active fontawesome-demo" id="tab1">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card  card-box">
                                        <div class="card-head">
                                            <header></header>
                                            <div class="tools">
                                                <a class="fa fa-repeat btn-color box-refresh" href="javascript:;"></a>
                                                <a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>
                                                <a class="t-close btn-color fa fa-times" href="javascript:;"></a>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-scrollable">
                                                <table id="tableExport" class="display table table-hover table-checkable order-column m-t-20" style="width: 100%">
                                                    <thead>
                                                        <tr>
                                                            <th></th>
                                                            <th> @Html.DisplayNameFor(model => model.Patient.Name) </th>
                                                            <th> @Html.DisplayNameFor(model => model.Patient.PatientGender) </th>
                                                            <th> Dirección </th>
                                                            <th> @Html.DisplayNameFor(model => model.Patient.Phone) </th>
                                                            <th> @Html.DisplayNameFor(model => model.Patient.Email) </th>
                                                            <th> @Html.DisplayNameFor(model => model.Patient.Birthday)</th>
                                                            <th> Acciones </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var item in Model)
                                                        {
                                                            <tr class="odd gradeX">
                                                                <td class="patient-img">
                                                                    <a href="@Url.Action("Details", new { id = item.Patient.Id })">
                                                                        <img src="@Url.Content("~/Content/UploadedFiles/"+item.Patient.Photo)" class="img-responsive" alt="">
                                                                    </a>
                                                                </td>
                                                                <td>
                                                                    <a href="@Url.Action("Details", new { id = item.Patient.Id })">
                                                                        @Html.DisplayFor(modelItem => item.Patient.Name) @Html.DisplayFor(modelItem => item.Patient.LastName)
                                                                    </a>
                                                                </td>
                                                                <td>
                                                                    @Html.DisplayFor(modelItem => item.Patient.PatientGender)
                                                                </td>
                                                                <td>
                                                                    @Html.DisplayFor(modelItem => item.Patient.StreetAndNumber) 
                                                                    @Html.DisplayFor(modelItem => item.Patient.Suburb) 
                                                                    @Html.DisplayFor(modelItem => item.Patient.City)
                                                                </td>
                                                                <td class="center">
                                                                    <a href="tel:@Html.DisplayFor(modelItem => item.Patient.Phone)">
                                                                        @Html.DisplayFor(modelItem => item.Patient.Phone)
                                                                    </a>
                                                                </td>
                                                                <td class="center">
                                                                    @Html.DisplayFor(modelItem => item.Patient.Email)
                                                                </td>
                                                                <td class="center">
                                                                    @Convert.ToDateTime(item.Patient.Birthday).ToString("dd/MM/yyyy")
                                                                </td>
                                                                <td class="right">
                                                                    <a href="@Url.Action("Details", new { id = item.Patient.Id })" class="btn btn-success btn-xs" title="Ver Perfil">
                                                                        <i class="fa fa-user-circle"></i>
                                                                    </a>
                                                                    <a href="@Url.Action("Edit", new { id = item.Patient.Id })" class="btn btn-primary btn-xs" title="Editar">
                                                                        <i class="fa fa-pencil"></i>
                                                                    </a>
                                                                    @if (item.Record)
                                                                    {
                                                                        <a href="@Url.Action("DetailsMedicalRecord", new { id = item.Patient.Id })" class="btn btn-warning btn-xs" title="Ver Historial">
                                                                            <i class="fa fa-address-book"></i>
                                                                        </a>
                                                                        <a href="@Url.Action("../EvolutionNote/Create/"+item.Patient.Id)" class="btn btn-danger btn-xs" title="Crear Nota de Evolución">
                                                                            <i class="fa fa-vcard-o"></i>
                                                                        </a>

                                                                    }
                                                                    else
                                                                    {
                                                                        <a href="@Url.Action("CreateRecordAlone", new { patientId = item.Patient.Id })" class="btn btn-warning btn-xs" title="Crear Historial">
                                                                            <i class="fa fa-address-book"></i>
                                                                        </a>
                                                                    }
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end page content -->
